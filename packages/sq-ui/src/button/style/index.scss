@use '../../style/mixin' as *;

@use './var' as *;

$module: #{$prefix}-btn;

@mixin btn-size($btn-height, $btn-font-size, $btn-icon-size, $padding) {
  height: $btn-height;
  font: $btn-font-size;
  padding: 0 calc($padding - $btn-border-width);

  .sq-icon {
    font-size: $btn-icon-size;
  }
}

@mixin btb-attr-color($type, $attr, $ghost: false) {
  $color-map: map-get($btn-color, $type);

  $theme-normal: map-get($color-map, 'normal');
  $theme-hover: map-get($color-map, 'hover');
  $theme-active: map-get($color-map, 'active');
  $theme-disabled: map-get($color-map, 'disabled');

  #{$attr}: $theme-normal;

  &:hover {
    #{$attr}: $theme-hover;
  }

  &:active {
    #{$attr}: $theme-active;
  }

  // ghost disabled 强制统一色
  @if $ghost {
    &:disabled {
      #{$attr}: map-get(map-get($btn-color, 'ghost'), 'disabled');
      background-color: transparent;
    }
  } @else {
    &:disabled {
      #{$attr}: $theme-disabled;
    }
  }
}

.#{$module} {
  @include reset;

  border: $btn-border-width solid transparent;
  background-color: transparent;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  border-radius: $btn-border-radius;
  transition: all $anim-duration-base linear;

  // icon 公共样式
  .sq-icon {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    vertical-align: middle;

    & + span:not(:empty) {
      margin-left: $btn-icon-text-margin-left;
    }
  }

  &[disabled] {
    cursor: not-allowed;
  }

  &-loading {
    opacity: 0.5;
    pointer-events: none;

    .sq-icon {
      @include spin;
    }
  }

  color: $btn-text-variant-base-color;
  @include btn-size($btn-height-md, $btn-font-md, $btn-icon-size-md, $btn-padding-md);

  &-variant-default {
    @include btb-attr-color('text-gray', color);
    @include btb-attr-color('gray-bg', background-color);
    @include btb-attr-color('gray-bg', border-color);

    &.#{$module}-status-primary,
    &.#{$module}-primary {
      color: $btn-text-variant-base-color;
      @include btb-attr-color('primary', background-color);
      @include btb-attr-color('primary', border-color);
    }

    &.#{$module}-status-success {
      color: $btn-text-variant-base-color;
      @include btb-attr-color('success', background-color);
      @include btb-attr-color('success', border-color);
    }

    &.#{$module}-status-warning {
      color: $btn-text-variant-base-color;
      @include btb-attr-color('warning', background-color);
      @include btb-attr-color('warning', border-color);
    }

    &.#{$module}-status-danger {
      color: $btn-text-variant-base-color;
      @include btb-attr-color('danger', background-color);
      @include btb-attr-color('danger', border-color);
    }

    // &.#{$module}-ghost {
    //   color: $btn-text-variant-base-color;
    //   @include btb-attr-color('danger', background-color);
    //   @include btb-attr-color('danger', border-color);
    // }
  }

  // 次要按钮
  &-variant-outline {
    @include btb-attr-color('text', color);
    @include btb-attr-color('white-bg', background-color);
    @include btb-attr-color('border-gray', border-color);

    &.#{$module}-status-primary,
    &.#{$module}-primary {
      @include btb-attr-color('primary', color);
      @include btb-attr-color('primary', border-color);
    }

    &.#{$module}-status-success {
      @include btb-attr-color('success', color);
      @include btb-attr-color('success', border-color);
    }

    &.#{$module}-status-warning {
      @include btb-attr-color('warning', color);
      @include btb-attr-color('warning', border-color);
    }

    &.#{$module}-status-danger {
      @include btb-attr-color('danger', color);
      @include btb-attr-color('danger', border-color);
    }

    // &.@{prefix}-button--ghost {
    //   @include btb-attr-color("none", background-color, true);
    //   @include btb-attr-color("white-ghost", color, true);
    //   @include btb-attr-color("white-ghost", border-color, true);

    //   &.@{prefix}-button--theme-primary {
    //     @include btb-attr-color("primary", color, true);
    //     @include btb-attr-color("primary", border-color, true);
    //   }

    //   &.@{prefix}-button--theme-success {
    //     @include btb-attr-color("success", color, true);
    //     @include btb-attr-color("success", border-color, true);
    //   }

    //   &.@{prefix}-button--theme-warning {
    //     @include btb-attr-color("warning", color, true);
    //     @include btb-attr-color("warning", border-color, true);
    //   }

    //   &.@{prefix}-button--theme-danger {
    //     @include btb-attr-color("danger", color, true);
    //     @include btb-attr-color("danger", border-color, true);
    //   }
    // }
  }
}

// @include btn-type(default);
// @include btn-type(primary);
// @include btn-type(text);

// @include btn-status(primary);
// @include btn-status(success);
// @include btn-status(warning);
// @include btn-status(danger);
